{% extends 'backend/template.html' %} {% block title %} Manajemen Data Film {%
endblock %} {% block content %}

<div class="pagetitle">
  <h1>Data Film</h1>
  <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a href="{{ url_for('admin.dashboard') }}">Home</a>
      </li>
      <li class="breadcrumb-item">Manajemen</li>
      <li class="breadcrumb-item active">Data Film</li>
    </ol>
  </nav>
</div>
<!-- End Page Title -->

<section class="section">
  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Daftar Film</h5>
          <a
            href="{{ url_for('admin.tambah_film') }}"
            class="btn btn-primary mb-3"
            style="border-radius: 50px"
            ><i class="bi bi-plus-circle"></i> Tambah Film Baru</a
          >

          <!-- Kolom Pencarian -->
          <div class="row mb-3">
            <div class="col-md-12">
              <input
                type="search"
                class="form-control"
                name="keyword"
                placeholder="Ketik judul untuk mencari..."
                hx-post="{{ url_for('admin.search_admin_film') }}"
                hx-trigger="keyup changed delay:500ms"
                hx-target="#film-table-container"
                hx-swap="innerHTML"
                style="border-radius: 50px"
              />
            </div>
          </div>
          <!-- End Kolom Pencarian -->

          <!-- Container untuk tabel hasil pencarian -->
          <div id="film-table-container">
            {% include 'dashboard/film/_film_table.html' %}
          </div>
          <!-- End Default Table Example -->
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %} {% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Ambil semua tombol dengan class .btn-hapus
    const deleteButtons = document.querySelectorAll(".btn-hapus");

    deleteButtons.forEach((button) => {
      button.addEventListener("click", function (event) {
        event.preventDefault(); // Mencegah aksi default tombol

        const filmId = this.getAttribute("data-id");
        const form = document.getElementById("form-hapus-" + filmId);

        Swal.fire({
          title: "Anda Yakin?",
          text: "Data film ini akan dihapus secara permanen!",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#3085d6",
          cancelButtonColor: "#d33",
          confirmButtonText: "Ya, Hapus!",
          cancelButtonText: "Batal",
        }).then((result) => {
          if (result.isConfirmed) {
            // Jika pengguna konfirmasi, kirim form
            form.submit();
          }
        });
      });
    });
  });
</script>
{% endblock %}
